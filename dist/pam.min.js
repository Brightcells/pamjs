!function(e,t){function n(e){for(c in e)c in b&&(b[c]=e[c])}function i(){var e,t={},n=navigator.userAgent.toLowerCase();return(e=n.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=n.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=n.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=n.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=n.match(/version\/([\d.]+).*safari/))?t.safari=e[1]:0,t}function a(e){b.global_bg_res=e[0],1==b.global_bg_res.length?r(b.global_bg_res[0]):(timeId=window.setInterval("PamJS.slideSetBackground(PamJS.config.global_bg_res)",PamJS.config.global_bg_time),d(b.global_bg_res))}function o(e,t,n,i,a,o,l){var d=document.createElement("script");d.setAttribute("src",String.format(e,t,n,i,a,o,l)),document.getElementsByTagName("head")[0].appendChild(d)}function l(e,t,n){if(1==e){var i=String.format("%1_%2_%3_%4",b.site,b.usr,b.slide_image_classify,(new Date).pattern("yyyy-MM-dd"));window.localStorage&&i in localStorage?a(JSON.parse(localStorage.getItem(i))):1==t?(b.global_bg_time=n,o(b.pic_jsonp_url,b.site,b.usr,b.slide_image_num,b.cache,b.device,b.slide_image_classify)):-1==t?o(b.dailypic_jsonp_url,b.site,b.usr,b.slide_image_num,b.cache,b.device,b.slide_image_classify):(b.global_bg_time=n,o(b.pic_jsonp_url,b.site,b.usr,1,b.cache,b.device,b.slide_image_classify))}else if(1==t.length)r(t[0]);else{b.global_bg_res=t;window.setInterval("PamJS.slideSetBackground(PamJS.config.global_bg_res)",n);d(b.global_bg_res)}}function d(e){b.img_index>=e.length&&(b.img_index=0),r(e[b.img_index++])}function r(e){var t=e.image,n=e.info,i=e.link,a=document.getElementById("_bgImg");if(a)a.src=t;else{var o=document.createElement("div");o.id="bgDiv",o.className="bgDiv";var a=(document.body.appendChild(o),document.createElement("img"));a.id="_bgImg",a.src=t;o.appendChild(a)}if(void 0==n||""==n){var l=document.getElementById("infoDiv");l&&l.parentNode.removeChild(l)}else{var l=document.getElementById("infoDiv");if(l)void 0!=i&&(document.getElementById("aInfo").href=i),document.getElementById("aInfo").innerHTML=n;else{var l=document.createElement("div");l.id="infoDiv",l.className="infoDiv";document.body.appendChild(l);_h3Title=document.createElement("h3"),_h3Title.className="h3Title",_h3Title.innerHTML="今日图片故事";l.appendChild(_h3Title);_aInfo=document.createElement("a"),_aInfo.id="aInfo",_aInfo.className="aInfo",void 0!=i&&(_aInfo.href=i,_aInfo.target="_blank"),_aInfo.innerHTML=n;l.appendChild(_aInfo)}}}function s(e,t){var n=i();if(1==e){var a=[url+"audio/snq",url+"audio/qg",url+"audio/xy"];if(n.ie&&parseInt(n.ie.split(".")[0])<9)u(a);else if(1==t)m(a);else{var o=parseInt(Math.random()*a.length);m(a.slice(o,o+1))}}else n.ie&&parseInt(n.ie.split(".")[0])<9?u(t):m(t)}function m(e){var t=0,n=document.createElement("audio");if(null!=n&&n.canPlayType){document.body.appendChild(n);g(n,e[t++]),n.addEventListener("ended",function(){t>=e.length&&(t=0),g(n,e[t++])},!1)}else{var i=document.createElement("div");i.innerText="您现在使用的浏览器不支持audio标签";document.body.appendChild(i)}}function g(e,t){e.id="_audio",e.controls="controls",e.preload="auto",e.autoplay="autoplay",e.className="audio",e.canPlayType("audio/ogg")?e.src=t+".ogg":e.canPlayType("audio/mpeg")&&(e.src=t+".mp3")}function u(e){var t=document.createElement("div"),n=(document.body.appendChild(t),document.createElement("a"));t.appendChild(n),n.id="_switch",n.href="javascript:void(0);",n.onclick=function(t){var i=document.getElementById("_bgsound");"关闭背景音乐"==document.getElementById("_switch").innerHTML?(i.src="",n.innerText="打开背景音乐"):(i.src=e[0]+".mp3",n.innerText="关闭背景音乐")},n.innerText="关闭背景音乐",n.className="switch";var i=document.createElement("bgsound");i.id="_bgsound",i.src=e[0]+".mp3",i.loop=-1;document.body.appendChild(i)}function p(e,t){var n=i();if(1==e){var a=[url+"movie/movie",url+"movie/xwqzzhxcp"];if(n.ie&&parseInt(n.ie.split(".")[0])<9)h(t);else if(1==t)_(a);else{var o=parseInt(Math.random()*a.length);_(a.slice(o,o+1))}}else n.ie&&parseInt(n.ie.split(".")[0])<9?h(t):_(t)}function _(e){var t=0,n=document.createElement("video");if(null!=n&&n.canPlayType){var i=document.createElement("div");i.className="movieDiv";document.body.appendChild(i),i.appendChild(n);f(n,e[t++]),n.addEventListener("ended",function(){t>=e.length&&(t=0),f(n,e[t++])},!1)}else{var a=document.createElement("div");a.innerText="您现在使用的浏览器不支持video标签";document.body.appendChild(a)}}function f(e,t){e.id="_movie",e.preload="auto",e.autoplay="autoplay",e.canPlayType("video/mp4")?e.src=t+".mp4":e.canPlayType("video/ogg")?e.src=t+".ogv":e.canPlayType("video/webM")&&(e.src=t+".webm")}function h(e){var t=document.createElement("div");t.className="ieMovieDiv";var n=(document.body.appendChild(t),document.createElement("embed"));n.id="_embed",n.src=e[0]+".avi",n.autostart=!0,n.loop=!0,n.className="ieEmbed";t.appendChild(n)}var y="2.0.0",b={site:"",usr:"",cache:"true",device:"C",img_index:0,slide_image_num:5,slide_image_classify:"",global_bg_time:0,global_bg_res:[],pic_jsonp_url:"http://pamjs.com/api/pic/?site=%1&usr=%2&num=%3&callback=pamjs&cache=%4&device=%5&classify=%6",daily_pic_jsonp_url:"http://pamjs.com/api/daily_pic/?site=%1&usr=%2&num=%3&callback=pamjs&cache=%4&device=%5&classify=%6",ctrl:!0,con_div:"Div",display:!1};Date.prototype.pattern=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":0==this.getHours()?12:this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+n[this.getDay()+""]));for(var i in t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},String.format=function(e){var t=arguments,n=new RegExp("%([1-"+t.length+"])","g");return String(e).replace(n,function(e,n){return t[n]})};var E=function(e){if(a(e),window.localStorage){for(var t=(new Date).pattern("yyyy-MM-dd"),n=0;n<localStorage.length;n++){var i=localStorage.key(0);i.indexOf(t)>=0||localStorage.removeItem(i)}localStorage.setItem(String.format("%1_%2_%3_%4",b.site,b.usr,b.slide_image_classify,t),JSON.stringify(e))}};window.onload=function(){if(b.ctrl){var e=document.getElementById(b.con_div);if(e){var t=document.createElement("span");t.id="ctrlSpan",t.className="ctrlSpan",b.display&&e?(e.style.display="",t.innerHTML="隐藏"):(e.style.display="none",t.innerHTML="显示");document.body.appendChild(t);t.addEventListener("click",function(){""==e.style.display?(e.style.display="none",t.innerHTML="显示"):(e.style.display="",t.innerHTML="隐藏")},!1)}}},v={version:y,config:b,init:n,_bg:l,_audio:s,_movie:p,slideSetBackground:d},e.PamJS=e.Pam=e.P=v,e.pamjs=E}(window);
//# sourceMappingURL=pam.min.js.map
