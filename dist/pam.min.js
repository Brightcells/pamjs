function init(e){for(c in e)c in config&&(config[c]=e[c])}function browserCheck(){var e,t={},n=navigator.userAgent.toLowerCase();return(e=n.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=n.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=n.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=n.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=n.match(/version\/([\d.]+).*safari/))?t.safari=e[1]:0,t}function setOneOrMore(e){config.global_bg_res=e[0],1==config.global_bg_res.length?setBackground(config.global_bg_res[0]):(timeId=window.setInterval("slideSetBackground(config.global_bg_res)",config.global_bg_time),slideSetBackground(config.global_bg_res))}function getRemoteInfo(e,t,n,i,o,a,c){var l=document.createElement("script");l.setAttribute("src",String.format(e,t,n,i,o,a,c)),document.getElementsByTagName("head")[0].appendChild(l)}function _bg(e,t,n){if(1==e){var i=String.format("%1_%2_%3_%4",config.site,config.usr,config.slide_image_classify,(new Date).pattern("yyyy-MM-dd"));window.localStorage&&i in localStorage?setOneOrMore(JSON.parse(localStorage.getItem(i))):1==t?(config.global_bg_time=n,getRemoteInfo(config.pic_jsonp_url,config.site,config.usr,config.slide_image_num,config.cache,config.device,config.slide_image_classify)):-1==t?getRemoteInfo(config.dailypic_jsonp_url,config.site,config.usr,config.slide_image_num,config.cache,config.device,config.slide_image_classify):(config.global_bg_time=n,getRemoteInfo(config.pic_jsonp_url,config.site,config.usr,1,config.cache,config.device,config.slide_image_classify))}else if(1==t.length)setBackground(t[0]);else{config.global_bg_res=t;window.setInterval("slideSetBackground(config.global_bg_res)",n);slideSetBackground(config.global_bg_res)}}function slideSetBackground(e){config.img_index>=e.length&&(config.img_index=0),setBackground(e[config.img_index++])}function setBackground(e){var t=e.image,n=e.info,i=e.link,o=document.getElementById("_bgImg");if(o)o.src=t;else{var a=document.createElement("div");a.id="bgDiv",a.className="bgDiv";var o=(document.body.appendChild(a),document.createElement("img"));o.id="_bgImg",o.src=t;a.appendChild(o)}if(void 0==n||""==n){var c=document.getElementById("infoDiv");c&&c.parentNode.removeChild(c)}else{var c=document.getElementById("infoDiv");if(c)void 0!=i&&(document.getElementById("aInfo").href=i),document.getElementById("aInfo").innerHTML=n;else{var c=document.createElement("div");c.id="infoDiv",c.className="infoDiv";document.body.appendChild(c);_h3Title=document.createElement("h3"),_h3Title.className="h3Title",_h3Title.innerHTML="今日图片故事";c.appendChild(_h3Title);_aInfo=document.createElement("a"),_aInfo.id="aInfo",_aInfo.className="aInfo",void 0!=i&&(_aInfo.href=i,_aInfo.target="_blank"),_aInfo.innerHTML=n;c.appendChild(_aInfo)}}}function _audio(e,t){var n=browserCheck();if(1==e){var i=[url+"audio/snq",url+"audio/qg",url+"audio/xy"];if(n.ie&&parseInt(n.ie.split(".")[0])<9)_audio_IE(i);else if(1==t)broadcastList(i);else{var o=parseInt(Math.random()*i.length);broadcastList(i.slice(o,o+1))}}else n.ie&&parseInt(n.ie.split(".")[0])<9?_audio_IE(t):broadcastList(t)}function broadcastList(e){var t=0,n=document.createElement("audio");if(null!=n&&n.canPlayType){document.body.appendChild(n);broadcast(n,e[t++]),n.addEventListener("ended",function(){t>=e.length&&(t=0),broadcast(n,e[t++])},!1)}else{var i=document.createElement("div");i.innerText="您现在使用的浏览器不支持audio标签";document.body.appendChild(i)}}function broadcast(e,t){e.id="_audio",e.controls="controls",e.preload="auto",e.autoplay="autoplay",e.className="audio",e.canPlayType("audio/ogg")?e.src=t+".ogg":e.canPlayType("audio/mpeg")&&(e.src=t+".mp3")}function _audio_IE(e){var t=document.createElement("div"),n=(document.body.appendChild(t),document.createElement("a"));t.appendChild(n),n.id="_switch",n.href="javascript:void(0);",n.onclick=function(t){var i=document.getElementById("_bgsound");"关闭背景音乐"==document.getElementById("_switch").innerHTML?(i.src="",n.innerText="打开背景音乐"):(i.src=e[0]+".mp3",n.innerText="关闭背景音乐")},n.innerText="关闭背景音乐",n.className="switch";var i=document.createElement("bgsound");i.id="_bgsound",i.src=e[0]+".mp3",i.loop=-1;document.body.appendChild(i)}function _movie(e,t){var n=browserCheck();if(1==e){var i=[url+"movie/movie",url+"movie/xwqzzhxcp"];if(n.ie&&parseInt(n.ie.split(".")[0])<9)_movie_IE(t);else if(1==t)broadcastSetList(i);else{var o=parseInt(Math.random()*i.length);broadcastSetList(i.slice(o,o+1))}}else n.ie&&parseInt(n.ie.split(".")[0])<9?_movie_IE(t):broadcastSetList(t)}function broadcastSetList(e){var t=0,n=document.createElement("video");if(null!=n&&n.canPlayType){var i=document.createElement("div");i.className="movieDiv";document.body.appendChild(i),i.appendChild(n);broadcastSet(n,e[t++]),n.addEventListener("ended",function(){t>=e.length&&(t=0),broadcastSet(n,e[t++])},!1)}else{var o=document.createElement("div");o.innerText="您现在使用的浏览器不支持video标签";document.body.appendChild(o)}}function broadcastSet(e,t){e.id="_movie",e.preload="auto",e.autoplay="autoplay",e.canPlayType("video/mp4")?e.src=t+".mp4":e.canPlayType("video/ogg")?e.src=t+".ogv":e.canPlayType("video/webM")&&(e.src=t+".webm")}function _movie_IE(e){var t=document.createElement("div");t.className="ieMovieDiv";var n=(document.body.appendChild(t),document.createElement("embed"));n.id="_embed",n.src=e[0]+".avi",n.autostart=!0,n.loop=!0,n.className="ieEmbed";t.appendChild(n)}function showid(e,t,n){function i(){g.style.width=Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth)+"px",g.style.height=Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)+"px"}function o(){l.style.marginTop=document.documentElement.scrollTop-l.offsetHeight/2+"px",l.style.marginLeft=document.documentElement.scrollLeft-l.offsetWidth/2+"px"}var a=document.all?!0:!1,c=a&&6==[/MSIE (\d)\.0/i.exec(navigator.userAgent)][0][1],l=document.getElementById(e);if(l.style.zIndex="9999",l.style.display="block",l.style.position=c?"absolute":"fixed",l.style.top=l.style.left="50%",l.style.marginTop=-l.offsetHeight/2+"px",l.style.marginLeft=-l.offsetWidth/2+"px",null==document.getElementById("_img")){var d=document.createElement("img");d.id="_img",d.src=t,d.className="imgStyle",l.appendChild(d);var s=document.createElement("br");l.appendChild(s);var r=document.createElement("b");r.innerHTML=n,l.appendChild(r)}var g=document.createElement("div");g.id="layer",g.style.width=g.style.height="100%",g.style.position=c?"absolute":"fixed",g.style.top=g.style.left=0,g.style.backgroundColor="#000",g.style.zIndex="9998",g.style.opacity="0.6",document.body.appendChild(g);for(var m=document.getElementsByTagName("select"),u=0;u<m.length;u++)m[u].style.visibility="hidden";a&&(g.style.filter="alpha(opacity=60)"),c&&(i(),o(),window.attachEvent("onscroll",function(){o()}),window.attachEvent("onresize",i)),g.onclick=function(){l.style.display="none",g.style.display="none";for(var e=0;e<m.length;e++)m[e].style.visibility="visible"}}var config={site:"",usr:"",cache:"true",device:"C",img_index:0,slide_image_num:5,slide_image_classify:"",global_bg_time:0,global_bg_res:[],pic_jsonp_url:"http://pamjs.com/api/pic/?site=%1&usr=%2&num=%3&callback=pamjs&cache=%4&device=%5&classify=%6",daily_pic_jsonp_url:"http://pamjs.com/api/daily_pic/?site=%1&usr=%2&num=%3&callback=pamjs&cache=%4&device=%5&classify=%6",ctrl:!0,con_div:"Div",display:!1};Date.prototype.pattern=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":0==this.getHours()?12:this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+n[this.getDay()+""]));for(var i in t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},String.format=function(e){var t=arguments,n=new RegExp("%([1-"+t.length+"])","g");return String(e).replace(n,function(e,n){return t[n]})};var pamjs=function(e){if(setOneOrMore(e),window.localStorage){for(var t=(new Date).pattern("yyyy-MM-dd"),n=0;n<localStorage.length;n++){var i=localStorage.key(0);i.indexOf(t)>=0||localStorage.removeItem(i)}localStorage.setItem(String.format("%1_%2_%3_%4",config.site,config.usr,config.slide_image_classify,t),JSON.stringify(e))}};window.onload=function(){if(config.ctrl){var e=document.getElementById(config.con_div);if(e){var t=document.createElement("span");t.id="ctrlSpan",t.className="ctrlSpan",config.display&&e?(e.style.display="",t.innerHTML="隐藏"):(e.style.display="none",t.innerHTML="显示");document.body.appendChild(t);t.addEventListener("click",function(){""==e.style.display?(e.style.display="none",t.innerHTML="显示"):(e.style.display="",t.innerHTML="隐藏")},!1)}}};
//# sourceMappingURL=pam.min.js.map
