!function(e,n){function t(e){for(c in e)c in y&&(y[c]=e[c])}function i(){var e,n={},t=navigator.userAgent.toLowerCase();return(e=t.match(/msie ([\d.]+)/))?n.ie=e[1]:(e=t.match(/firefox\/([\d.]+)/))?n.firefox=e[1]:(e=t.match(/chrome\/([\d.]+)/))?n.chrome=e[1]:(e=t.match(/opera.([\d.]+)/))?n.opera=e[1]:(e=t.match(/version\/([\d.]+).*safari/))?n.safari=e[1]:0,n}function a(e){y.global_bg_res=e[0],1==y.global_bg_res.length?r(y.global_bg_res[0]):(timeId=window.setInterval("slideSetBackground(config.global_bg_res)",y.global_bg_time),d(y.global_bg_res))}function l(e,n,t,i,a,l,o){var d=document.createElement("script");d.setAttribute("src",String.format(e,n,t,i,a,l,o)),document.getElementsByTagName("head")[0].appendChild(d)}function o(e,n,t){if(1==e){var i=String.format("%1_%2_%3_%4",y.site,y.usr,y.slide_image_classify,(new Date).pattern("yyyy-MM-dd"));window.localStorage&&i in localStorage?a(JSON.parse(localStorage.getItem(i))):1==n?(y.global_bg_time=t,l(y.pic_jsonp_url,y.site,y.usr,y.slide_image_num,y.cache,y.device,y.slide_image_classify)):-1==n?l(y.dailypic_jsonp_url,y.site,y.usr,y.slide_image_num,y.cache,y.device,y.slide_image_classify):(y.global_bg_time=t,l(y.pic_jsonp_url,y.site,y.usr,1,y.cache,y.device,y.slide_image_classify))}else if(1==n.length)r(n[0]);else{y.global_bg_res=n;window.setInterval("slideSetBackground(config.global_bg_res)",t);d(y.global_bg_res)}}function d(e){y.img_index>=e.length&&(y.img_index=0),r(e[y.img_index++])}function r(e){var n=e.image,t=e.info,i=e.link,a=document.getElementById("_bgImg");if(a)a.src=n;else{var l=document.createElement("div");l.id="bgDiv",l.className="bgDiv";var a=(document.body.appendChild(l),document.createElement("img"));a.id="_bgImg",a.src=n;l.appendChild(a)}if(void 0==t||""==t){var o=document.getElementById("infoDiv");o&&o.parentNode.removeChild(o)}else{var o=document.getElementById("infoDiv");if(o)void 0!=i&&(document.getElementById("aInfo").href=i),document.getElementById("aInfo").innerHTML=t;else{var o=document.createElement("div");o.id="infoDiv",o.className="infoDiv";document.body.appendChild(o);_h3Title=document.createElement("h3"),_h3Title.className="h3Title",_h3Title.innerHTML="今日图片故事";o.appendChild(_h3Title);_aInfo=document.createElement("a"),_aInfo.id="aInfo",_aInfo.className="aInfo",void 0!=i&&(_aInfo.href=i,_aInfo.target="_blank"),_aInfo.innerHTML=t;o.appendChild(_aInfo)}}}function s(e,n){var t=i();if(1==e){var a=[url+"audio/snq",url+"audio/qg",url+"audio/xy"];if(t.ie&&parseInt(t.ie.split(".")[0])<9)g(a);else if(1==n)m(a);else{var l=parseInt(Math.random()*a.length);m(a.slice(l,l+1))}}else t.ie&&parseInt(t.ie.split(".")[0])<9?g(n):m(n)}function m(e){var n=0,t=document.createElement("audio");if(null!=t&&t.canPlayType){document.body.appendChild(t);u(t,e[n++]),t.addEventListener("ended",function(){n>=e.length&&(n=0),u(t,e[n++])},!1)}else{var i=document.createElement("div");i.innerText="您现在使用的浏览器不支持audio标签";document.body.appendChild(i)}}function u(e,n){e.id="_audio",e.controls="controls",e.preload="auto",e.autoplay="autoplay",e.className="audio",e.canPlayType("audio/ogg")?e.src=n+".ogg":e.canPlayType("audio/mpeg")&&(e.src=n+".mp3")}function g(e){var n=document.createElement("div"),t=(document.body.appendChild(n),document.createElement("a"));n.appendChild(t),t.id="_switch",t.href="javascript:void(0);",t.onclick=function(n){var i=document.getElementById("_bgsound");"关闭背景音乐"==document.getElementById("_switch").innerHTML?(i.src="",t.innerText="打开背景音乐"):(i.src=e[0]+".mp3",t.innerText="关闭背景音乐")},t.innerText="关闭背景音乐",t.className="switch";var i=document.createElement("bgsound");i.id="_bgsound",i.src=e[0]+".mp3",i.loop=-1;document.body.appendChild(i)}function p(e,n){var t=i();if(1==e){var a=[url+"movie/movie",url+"movie/xwqzzhxcp"];if(t.ie&&parseInt(t.ie.split(".")[0])<9)h(n);else if(1==n)_(a);else{var l=parseInt(Math.random()*a.length);_(a.slice(l,l+1))}}else t.ie&&parseInt(t.ie.split(".")[0])<9?h(n):_(n)}function _(e){var n=0,t=document.createElement("video");if(null!=t&&t.canPlayType){var i=document.createElement("div");i.className="movieDiv";document.body.appendChild(i),i.appendChild(t);f(t,e[n++]),t.addEventListener("ended",function(){n>=e.length&&(n=0),f(t,e[n++])},!1)}else{var a=document.createElement("div");a.innerText="您现在使用的浏览器不支持video标签";document.body.appendChild(a)}}function f(e,n){e.id="_movie",e.preload="auto",e.autoplay="autoplay",e.canPlayType("video/mp4")?e.src=n+".mp4":e.canPlayType("video/ogg")?e.src=n+".ogv":e.canPlayType("video/webM")&&(e.src=n+".webm")}function h(e){var n=document.createElement("div");n.className="ieMovieDiv";var t=(document.body.appendChild(n),document.createElement("embed"));t.id="_embed",t.src=e[0]+".avi",t.autostart=!0,t.loop=!0,t.className="ieEmbed";n.appendChild(t)}var y={site:"",usr:"",cache:"true",device:"C",img_index:0,slide_image_num:5,slide_image_classify:"",global_bg_time:0,global_bg_res:[],pic_jsonp_url:"http://pamjs.com/api/pic/?site=%1&usr=%2&num=%3&callback=pamjs&cache=%4&device=%5&classify=%6",daily_pic_jsonp_url:"http://pamjs.com/api/daily_pic/?site=%1&usr=%2&num=%3&callback=pamjs&cache=%4&device=%5&classify=%6",ctrl:!0,con_div:"Div",display:!1};Date.prototype.pattern=function(e){var n={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":0==this.getHours()?12:this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+t[this.getDay()+""]));for(var i in n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e},String.format=function(e){var n=arguments,t=new RegExp("%([1-"+n.length+"])","g");return String(e).replace(t,function(e,t){return n[t]})};window.onload=function(){if(y.ctrl){var e=document.getElementById(y.con_div);if(e){var n=document.createElement("span");n.id="ctrlSpan",n.className="ctrlSpan",y.display&&e?(e.style.display="",n.innerHTML="隐藏"):(e.style.display="none",n.innerHTML="显示");document.body.appendChild(n);n.addEventListener("click",function(){""==e.style.display?(e.style.display="none",n.innerHTML="显示"):(e.style.display="",n.innerHTML="隐藏")},!1)}}},v={version:"2.0.0",init:t,_bg:o,_audio:s,_movie:p},e.PamJS=e.Pam=e.P=v}(window);
//# sourceMappingURL=pam.min.js.map
