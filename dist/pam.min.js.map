{"version":3,"sources":["pam.js"],"names":["e","t","init","conf","c","config","browserCheck","s","Sys","ua","navigator","userAgent","toLowerCase","match","ie","firefox","chrome","opera","safari","setOneOrMore","data","global_bg_res","length","setBackground","timeId","window","setInterval","PamJS","global_bg_time","slideSetBackground","getRemoteInfo","url","site","usr","num","cache","device","classify","script","document","createElement","setAttribute","String","format","getElementsByTagName","appendChild","_bg","_bg_mode","_bg_res","_bg_time","storeage_key","slide_image_classify","Date","pattern","localStorage","JSON","parse","getItem","pic_jsonp_url","slide_image_num","dailypic_jsonp_url","img_index","_bg_image","_bg_info","_bg_link","_bgImg","getElementById","src","_bgDiv","id","className","body","undefined","_infoDiv","parentNode","removeChild","href","innerHTML","_h3Title","_aInfo","target","_audio","_audio_mode","_audio_res","audioList","parseInt","split","_audio_IE","broadcastList","slideIndex","Math","random","slice","audioIndex","canPlayType","broadcast","addEventListener","_notice","innerText","controls","preload","autoplay","_switch","onclick","stop","_bgsound","loop","_movie","_movie_mode","_movie_res","videoList","_movie_IE","broadcastSetList","videoIndex","_video","_movieDiv","broadcastSet","_embed","autostart","version","daily_pic_jsonp_url","ctrl","con_div","display","prototype","fmt","o","M+","this","getMonth","d+","getDate","h+","getHours","H+","m+","getMinutes","s+","getSeconds","q+","floor","S","getMilliseconds","week","0","1","2","3","4","5","6","test","replace","RegExp","$1","getFullYear","substr","getDay","k","str","args","arguments","re","$2","pamjs","ymd","i","key","indexOf","removeItem","setItem","stringify","onload","_conDiv","_ctrlSpan","style","v","Pam","P"],"mappings":"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","file":"pam.min.js","sourcesContent":["//\n//                       _oo0oo_\n//                      o8888888o\n//                      88\" . \"88\n//                      (| -_- |)\n//                      0\\  =  /0\n//                    ___/'---'\\___\n//                 .' \\\\|       |// '.\n//                / \\\\|||   :   |||// \\\n//               / _|||||  -:-  |||||_ \\\n//              |   |  \\\\\\  -  ///  |   |\n//              | \\_|   ''\\---/''   |_/ |\n//              \\  .-\\__   '-'   __/-.  /\n//            ___'. .'   /--.--\\   '. .'___\n//         .\"\" '<  `.____\\_<|>_/____.`  >' \"\".\n//        | | :   `- \\`.;`\\ _ /`;.`\\ -`   : | |\n//        \\  \\ `_.    \\_ __\\ /__ _/    ._` /  /\n//    =====`-.___ `.____ \\_____/ ____.` ___.-'=====\n//                       `=---='\n//  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n//          佛祖保佑       HQM        永无BUG\n//\n\n/**\n * @fileOverview pam.js which to simply deal with picture\\audio\\movie\n * @author HQM\n * @date 2013/06/27\n * @e-mail qiminis0801@gmail.com\n * @github https://github.com/HQMIS\n * @version 1.0.1\n */\n\n!(function(e, t) {\n    /**\n     * Global Variable\n     */\n    var version = '2.0.0';\n\n    var config = {\n        site: '',\n        usr: '',\n\n        cache: 'true',\n        device: 'C',\n\n        img_index: 0, // the index of the picList\n\n        slide_image_num: 5, // number of side image from server\n        slide_image_classify: \"\",  // classify of side image from server\n\n        global_bg_time: 0, // global backgroud interval time\n        global_bg_res: [], // global backgroud res\n\n        pic_jsonp_url: \"http://pamjs.com/api/pic/?site=%1&usr=%2&num=%3&callback=pamjs&cache=%4&device=%5&classify=%6\",\n        daily_pic_jsonp_url: \"http://pamjs.com/api/daily_pic/?site=%1&usr=%2&num=%3&callback=pamjs&cache=%4&device=%5&classify=%6\",\n\n        ctrl: true,  // 是否显示控制按钮\n        con_div: 'Div',  // 控制按钮控制区域\n        display: false  // 控制区域内内容是否显示\n    }\n\n    /**\n     * @description Override global var config\n     *\n     * @param conf\n     *\n     * @return\n     */\n    function init(conf) {\n        for(c in conf) {\n            if(c in config) {\n                config[c] = conf[c];\n            }\n        }\n    }\n\n    /**\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     *\n     * the global function used for all feature\n     *\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     */\n\n    /**\n     * @description check the browser you are using\n     *\n     * @param\n     *\n     * @return {Object} Sys\n     */\n    function browserCheck() {\n        var Sys = {},\n            ua = navigator.userAgent.toLowerCase(),\n            s;\n\n        (s = ua.match(/msie ([\\d.]+)/)) ? Sys.ie = s[1] : (s = ua\n                .match(/firefox\\/([\\d.]+)/)) ? Sys.firefox = s[1] : (s = ua\n                .match(/chrome\\/([\\d.]+)/)) ? Sys.chrome = s[1] : (s = ua\n                .match(/opera.([\\d.]+)/)) ? Sys.opera = s[1] : (s = ua\n                .match(/version\\/([\\d.]+).*safari/)) ? Sys.safari = s[1] : 0;\n\n        return Sys;\n    }\n\n    /**\n     * @description convert timestamp to strftime, which can call by timestamp\n     *\n     * @param {fmt}\n     *            strftime time format such as \"yyyy-MM-dd\"\n     * @return {fmt}\n     *            strftime time which has already been convert\n     */\n    Date.prototype.pattern=function(fmt) {\n        var o = {\n                \"M+\" : this.getMonth()+1, //月份\n                \"d+\" : this.getDate(), //日\n                \"h+\" : this.getHours() == 0 ? 12 : this.getHours(), //小时\n                \"H+\" : this.getHours(), //小时\n                \"m+\" : this.getMinutes(), //分\n                \"s+\" : this.getSeconds(), //秒\n                \"q+\" : Math.floor((this.getMonth()+3)/3), //季度\n                \"S\" : this.getMilliseconds() //毫秒\n            },\n            week = {\n                \"0\" : \"\\u65e5\",\n                \"1\" : \"\\u4e00\",\n                \"2\" : \"\\u4e8c\",\n                \"3\" : \"\\u4e09\",\n                \"4\" : \"\\u56db\",\n                \"5\" : \"\\u4e94\",\n                \"6\" : \"\\u516d\"\n            };\n\n        if(/(y+)/.test(fmt)){\n            fmt=fmt.replace(RegExp.$1, (this.getFullYear()+\"\").substr(4 - RegExp.$1.length));\n        }\n\n        if(/(E+)/.test(fmt)){\n            fmt=fmt.replace(RegExp.$1, ((RegExp.$1.length>1) ? (RegExp.$1.length>2 ? \"\\u661f\\u671f\" : \"\\u5468\") : \"\")+week[this.getDay()+\"\"]);\n        }\n\n        for(var k in o){\n            if(new RegExp(\"(\"+ k +\")\").test(fmt)){\n                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));\n            }\n        }\n\n        return fmt;\n    };\n\n    /**\n     * @description format string\n     *\n     * @param {str}\n     *            string to format\n     * @return\n     *            string formated\n     */\n    String.format = function(str) {\n        var args = arguments,\n            re = new RegExp(\"%([1-\" + args.length + \"])\", \"g\");\n\n        return String(str).replace(re, function($1, $2) {\n            return args[$2];\n        });\n    };\n\n    /**\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     *\n     * the two function below is for jsonp\n     *\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     */\n    function setOneOrMore(data) {\n        config.global_bg_res = data[0];\n        if (1 == config.global_bg_res.length) {\n            setBackground(config.global_bg_res[0]);\n        } else {\n            // window.setInterval to call PamJS.function\n            timeId = window.setInterval(\"PamJS.slideSetBackground(PamJS.config.global_bg_res)\", PamJS.config.global_bg_time);\n            slideSetBackground(config.global_bg_res);\n        }\n    }\n\n    var pamjs = function(data) {\n        setOneOrMore(data);\n\n        if (window.localStorage) {\n            var ymd = new Date().pattern(\"yyyy-MM-dd\");\n            for(var i=0; i<localStorage.length; i++) {\n                var key = localStorage.key(0);\n                if (key.indexOf(ymd) >= 0) {\n\n                } else {\n                    localStorage.removeItem(key);\n                }\n            }\n            localStorage.setItem(String.format(\"%1_%2_%3_%4\", config.site, config.usr, config.slide_image_classify, ymd), JSON.stringify(data));\n        }\n    };\n\n    function getRemoteInfo(url, site, usr, num, cache, device, classify) {\n        // 创建script标签，设置其属性\n        var script = document.createElement('script');\n        script.setAttribute('src', String.format(url, site, usr, num, cache, device, classify));\n        // 把script标签加入head，此时调用开始\n        document.getElementsByTagName('head')[0].appendChild(script);\n    }\n\n    /**\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     *\n     * the three function below is for picture\n     *\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     */\n\n    /**\n     * @description control to set background use picture\n     *\n     * @param {int _bg_mode}\n     *     0 - diy resource\n     *     1 - use server's resource\n     * @param {Array or Int _bg_res}\n     *     Array - path of diy resource\n     *     Int - show background _bg_mode, 0 for just one image, 1 for slide image\n     * @param {Array or Int _bg_info}\n     *     Array - info of diy resource\n     *     Int - choose whether to display _bg_info, 0 for display, 1 for not display\n     * @param {Array or Int _bg_link}\n     *     Array - link of diy resource\n     *     Int - choose whether to add _bg_link, 0 for add, 1 for not add\n     * @param {int _bg_time}\n     *     the interval time of the timer, unit is millisecond(毫秒)\n     *\n     * @return {null} null\n     */\n    function _bg(_bg_mode, _bg_res, _bg_time) {\n        /**\n         * when _bg_mode equals 1, we should use server's picture else when _bg_mode\n         * equals 0, we should use diy picture\n         */\n        if (1 == _bg_mode) {\n            var storeage_key = String.format(\"%1_%2_%3_%4\", config.site, config.usr, config.slide_image_classify, new Date().pattern(\"yyyy-MM-dd\"));\n            if (window.localStorage && (storeage_key in localStorage)) {\n                setOneOrMore(JSON.parse(localStorage.getItem(storeage_key)));\n            } else {\n                if (1 == _bg_res) { // order to set picture on server in the list as background\n                    config.global_bg_time = _bg_time;\n                    /* set a timer, to set background every interval time */\n                    getRemoteInfo(config.pic_jsonp_url, config.site, config.usr, config.slide_image_num, config.cache, config.device, config.slide_image_classify);\n                } else if(-1 == _bg_res) {\n                    getRemoteInfo(config.dailypic_jsonp_url, config.site, config.usr, config.slide_image_num, config.cache, config.device, config.slide_image_classify);\n                }else { // set one random picture as background\n                    config.global_bg_time = _bg_time;\n                    getRemoteInfo(config.pic_jsonp_url, config.site, config.usr, 1, config.cache, config.device, config.slide_image_classify);\n                }\n            }\n        } else {\n            if (1 == _bg_res.length) {\n                /*\n                 * the length of the array is 1, direct set the picture index which\n                 * index is 0 as background\n                 */\n                setBackground(_bg_res[0]);\n            } else {\n                config.global_bg_res = _bg_res;\n                /* set a timer, to set background every interval time */\n                // window.setInterval to call PamJS.function\n                var timeId = window.setInterval(\"PamJS.slideSetBackground(PamJS.config.global_bg_res)\", _bg_time);\n                slideSetBackground(config.global_bg_res);\n            }\n        }\n    }\n\n    /**\n     * @description slide to set background use picture\n     *\n     * @param {Array}\n     *            _bg_res the picture list to be set as background\n     * @return {null} null\n     */\n    function slideSetBackground(_bg_res) {\n        /* judge the index of the picture to be set as background */\n        if (config.img_index >= _bg_res.length) {\n            config.img_index = 0;\n        }\n        setBackground(_bg_res[config.img_index++]);\n    }\n\n    /**\n     * @description set background use picture\n     *\n     * @param {String}\n     *            _bg_res the picture to be set as background\n     * @return {null} null\n     */\n    function setBackground(_bg_res) {\n        var _bg_image = _bg_res[\"image\"],\n            _bg_info = _bg_res[\"info\"],\n            _bg_link = _bg_res[\"link\"];\n\n        /* Judge whether the img tag whose id is _bgImg exists or not */\n        var _bgImg = document.getElementById(\"_bgImg\");\n        if (_bgImg) {\n            _bgImg.src = _bg_image;\n        } else {\n            /* create div && set id\\className && append to body */\n            var _bgDiv = document.createElement(\"div\");\n            _bgDiv.id = \"bgDiv\";\n            _bgDiv.className = \"bgDiv\";\n            var object = document.body.appendChild(_bgDiv);\n\n            /* create img && set src && append to div above */\n            var _bgImg = document.createElement(\"img\");\n            _bgImg.id = \"_bgImg\";\n            _bgImg.src = _bg_image;\n            var object = _bgDiv.appendChild(_bgImg);\n        }\n\n        //alert(_bg_info);\n        if (undefined == _bg_info || '' == _bg_info) {\n            var _infoDiv = document.getElementById(\"infoDiv\");\n            if(_infoDiv) {\n                _infoDiv.parentNode.removeChild(_infoDiv);\n            }\n        } else {\n            /* Judge whether the info tag whose id is _bgInfo exists or not */\n            var _infoDiv = document.getElementById(\"infoDiv\");\n            if (_infoDiv) {\n                if (undefined != _bg_link) {\n                    document.getElementById(\"aInfo\").href = _bg_link;\n                }\n                document.getElementById(\"aInfo\").innerHTML = _bg_info;\n            } else {\n                /* create div && set id\\className && append to body */\n                var _infoDiv = document.createElement(\"div\");\n                _infoDiv.id = \"infoDiv\";\n                _infoDiv.className = \"infoDiv\";\n                var object = document.body.appendChild(_infoDiv);\n\n                _h3Title = document.createElement(\"h3\");\n                _h3Title.className = \"h3Title\";\n                _h3Title.innerHTML = \"今日图片故事\";\n                var object = _infoDiv.appendChild(_h3Title);\n\n                _aInfo = document.createElement(\"a\");\n                _aInfo.id = \"aInfo\";\n                _aInfo.className = \"aInfo\";\n                if (undefined != _bg_link) {\n                    _aInfo.href = _bg_link;\n                    _aInfo.target = \"_blank\";\n                }\n                _aInfo.innerHTML = _bg_info;\n                var object = _infoDiv.appendChild(_aInfo);\n            }\n        }\n    }\n\n    /**\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     *\n     * the three function below is for audio\n     *\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     */\n\n    /**\n     * @description control to broadcast audio\n     *\n     * @param {int}\n     *            _audio_mode 0 - diy resource(Array) 1 - use server's\n     *            resource(String)\n     * @param {Array\n     *            or Int} _audio_res Array - path of diy resource Int - broadcast\n     *            _audio_mode, 0 for single replay, 1 for more replay\n     * @return {null} null\n     */\n    function _audio(_audio_mode, _audio_res) {\n        var Sys = browserCheck();\n\n        /**\n         * when _audio_mode equals 1, we should use server's audio else when\n         * _audio_mode equals 0, we should use diy audio\n         */\n        if (1 == _audio_mode) {\n            /* audio list on server */\n            var audioList = [ url + \"audio/snq\", url + \"audio/qg\", url + \"audio/xy\" ];\n\n            if (Sys.ie && parseInt(Sys.ie.split(\".\")[0]) < 9) {\n                _audio_IE(audioList);\n            } else {\n                if (1 == _audio_res) { // order play the audio on server\n                    broadcastList(audioList);\n                } else { // order play the audio on server\n                    var slideIndex = parseInt(Math.random() * audioList.length);\n                    broadcastList(audioList.slice(slideIndex, slideIndex + 1));\n                }\n            }\n        } else {\n            /**\n             * if statement deal with the browser which not support html5's audio\n             * tag else statement deal with the browser that support html5's audio\n             * tag\n             */\n            if (Sys.ie && parseInt(Sys.ie.split(\".\")[0]) < 9) {\n                _audio_IE(_audio_res);\n            } else {\n                broadcastList(_audio_res);\n            }\n        }\n    }\n\n    /**\n     * @description broadcast audio by list\n     *\n     * @param {String}\n     *            _audio_res the audio list to be broadcast\n     * @return {null} null\n     */\n    function broadcastList(_audio_res) {\n        /* audioIndex is the index of resource array */\n        var audioIndex = 0;\n        /* create audio */\n        var _audio = document.createElement(\"audio\");\n\n        /**\n         * judge the audio and deal with if auido is null or not can play, show the\n         * notice else deal with the request\n         */\n        if (_audio != null && _audio.canPlayType) {\n            /* append audio to body */\n            var object = document.body.appendChild(_audio);\n\n            /* broadcat _audio_res[i] through audio */\n            broadcast(_audio, _audio_res[audioIndex++]);\n\n            /* add the callback function addEventListener to audio's object */\n            _audio.addEventListener('ended', function() {\n                /* judge the index of the audio to be broadcast */\n                if (audioIndex >= _audio_res.length) {\n                    audioIndex = 0;\n                }\n\n                /* broadcat _audio_res[i] through audio */\n                broadcast(_audio, _audio_res[audioIndex++]);\n            }, false);\n        } else {\n            var _notice = document.createElement(\"div\");\n            _notice.innerText = \"您现在使用的浏览器不支持audio标签\";\n            var object = document.body.appendChild(_notice);\n        }\n    }\n\n    /**\n     * @description broadcast audio\n     *\n     * @param {object}\n     *            _audio the object create by document.createElement(\"audio\")\n     * @param {String}\n     *            _audio_res the audio to be broadcast\n     * @return {null} null\n     */\n    function broadcast(_audio, _audio_res) {\n        /* set id\\controls\\preload\\autoplay\\className */\n        _audio.id = \"_audio\";\n        _audio.controls = \"controls\";\n        _audio.preload = \"auto\";\n        _audio.autoplay = \"autoplay\";\n        _audio.className = \"audio\";\n\n        /*\n         * judge the browser you are using whether support audio which is ogg format\n         * or not && select the suitable format's audio to be broadcast\n         */\n        if (_audio.canPlayType(\"audio/ogg\")) {\n            _audio.src = _audio_res + \".ogg\";\n        } else if (_audio.canPlayType(\"audio/mpeg\")) {\n            _audio.src = _audio_res + \".mp3\";\n        }\n    }\n\n    /**\n     * @description broadcast audio for ie version below 9\n     *\n     * @param {Array}\n     *            _audio_res Array - path of _audio_res to be broadcast\n     * @return {null} null\n     */\n    function _audio_IE(_audio_res) {\n        /* create div && append to body */\n        var _notice = document.createElement(\"div\");\n        var object = document.body.appendChild(_notice);\n\n        /*\n         * create a && set id\\href\\onclick\\innerText\\className && append to div\n         * above\n         */\n        var _switch = document.createElement(\"a\");\n        _notice.appendChild(_switch);\n        _switch.id = \"_switch\";\n        _switch.href = \"javascript:void(0);\";\n        _switch.onclick = function(stop) {\n            var _bgsound = document.getElementById(\"_bgsound\");\n            /* judge the text of the _switch and deal with */\n            if (\"关闭背景音乐\" == document.getElementById(\"_switch\").innerHTML) {\n                _bgsound.src = \"\";\n                _switch.innerText = \"打开背景音乐\";\n            } else {\n                _bgsound.src = _audio_res[0] + \".mp3\";\n                _switch.innerText = \"关闭背景音乐\";\n            }\n        };\n        _switch.innerText = \"关闭背景音乐\";\n        _switch.className = \"switch\";\n\n        /* create bgsound && set id\\src\\loop && append to body */\n        var _bgsound = document.createElement(\"bgsound\");\n        _bgsound.id = \"_bgsound\";\n        _bgsound.src = _audio_res[0] + \".mp3\";\n        _bgsound.loop = -1;\n        var object = document.body.appendChild(_bgsound);\n    }\n\n    /**\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     *\n     * the three function below is for movie(video)\n     *\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     */\n\n    /**\n     * @description control to set movie(video) as background whichi just is\n     *              broadcast movie without controls\n     *\n     * @param {int}\n     *            _movie_mode 0 - diy resource(Array) 1 - use server's\n     *            resource(String)\n     * @param {Array\n     *            or Int} _movie_res Array - path of diy resource Int - broadcast\n     *            _movie_mode, 0 for single replay, 1 for more replay\n     * @return {null} null\n     */\n    function _movie(_movie_mode, _movie_res) {\n        var Sys = browserCheck();\n\n        /**\n         * when _movie_mode equals 1, we should use server's audio else when\n         * _movie_mode equals 0, we should use diy audio\n         */\n        if (1 == _movie_mode) {\n            /* video list on server */\n            var videoList = [ url + \"movie/movie\", url + \"movie/xwqzzhxcp\" ];\n\n            if (Sys.ie && parseInt(Sys.ie.split(\".\")[0]) < 9) {\n                _movie_IE(_movie_res);\n            } else {\n                if (1 == _movie_res) { // order play the movie(video) on server\n                    broadcastSetList(videoList);\n                } else { // order play the audio on server\n                    var slideIndex = parseInt(Math.random() * videoList.length);\n                    broadcastSetList(videoList.slice(slideIndex, slideIndex + 1));\n                }\n            }\n        } else {\n            /**\n             * if statement deal with the browser which not support html5's video\n             * tag else statement deal with the browser that support html5's video\n             * tag\n             */\n            if (Sys.ie && parseInt(Sys.ie.split(\".\")[0]) < 9) {\n                _movie_IE(_movie_res);\n            } else {\n                broadcastSetList(_movie_res);\n            }\n        }\n    }\n\n    /**\n     * @description set movie(video) as background whichi just is broadcast movie\n     *              without controls by list\n     *\n     * @param {String}\n     *            _movie_res the video list to be broadcast\n     * @return {null} null\n     */\n    function broadcastSetList(_movie_res) {\n        /* videoIndex is the index of resource array */\n        var videoIndex = 0;\n        /* create video */\n        var _video = document.createElement(\"video\");\n\n        /**\n         * judge the vedio and deal with if vedio is null or not can play, show the\n         * notice else deal with the request\n         */\n        if (_video != null && _video.canPlayType) {\n            /* append _movieDiv to body */\n            var _movieDiv = document.createElement(\"div\");\n            _movieDiv.className = \"movieDiv\";\n            var object = document.body.appendChild(_movieDiv);\n\n            /* append video to body */\n            var object = _movieDiv.appendChild(_video);\n\n            /* broadcat _movie_res[i] through video */\n            broadcastSet(_video, _movie_res[videoIndex++]);\n\n            /* add the callback function addEventListener to video's object */\n            _video.addEventListener('ended', function() {\n                /* judge the index of the video to be broadcast */\n                if (videoIndex >= _movie_res.length) {\n                    videoIndex = 0;\n                }\n\n                /* broadcat _movie_res[i] through video */\n                broadcastSet(_video, _movie_res[videoIndex++]);\n            }, false);\n        } else {\n            var _notice = document.createElement(\"div\");\n            _notice.innerText = \"您现在使用的浏览器不支持video标签\";\n            var object = document.body.appendChild(_notice);\n        }\n    }\n\n    /**\n     * @description set movie(video) as background whichi just is broadcast movie\n     *              without controls\n     *\n     * @param {object}\n     *            _movie the object create by document.createElement(\"movie\")\n     * @param {String}\n     *            _movie_res the movie to be broadcast\n     * @return {null} null\n     */\n    function broadcastSet(_movie, _movie_res) {\n        /* set id\\controls\\preload\\autoplay\\className */\n        _movie.id = \"_movie\";\n        // _movie.controls = \"controls\";\n        _movie.preload = \"auto\";\n        _movie.autoplay = \"autoplay\";\n        // _movie.className = \"video\";\n\n        /*\n         * judge the browser you are using whether support audio which is ogg format\n         * or not && select the suitable format's audio to be broadcast\n         *\n         * mp4 is much smaller than ogv, so make mp4 header\n         */\n        if (_movie.canPlayType(\"video/mp4\")) {\n            _movie.src = _movie_res + \".mp4\";\n        } else if (_movie.canPlayType(\"video/ogg\")) {\n            _movie.src = _movie_res + \".ogv\";\n        } else if (_movie.canPlayType(\"video/webM\")) {\n            _movie.src = _movie_res + \".webm\";\n        }\n    }\n\n    /**\n     * @description set movie(video) as background whichi just is broadcast movie\n     *              without controls for ie version below 9\n     *\n     * @param {Array}\n     *            _movie_res Array - path of _movie_res to be set\n     * @return {null} null\n     */\n    function _movie_IE(_movie_res) {\n        /* create div && append to body */\n        var _notice = document.createElement(\"div\");\n        _notice.className = \"ieMovieDiv\";\n        var object = document.body.appendChild(_notice);\n\n        /* create embed && set id\\src\\loop && append to div _notice */\n        var _embed = document.createElement(\"embed\");\n        _embed.id = \"_embed\";\n        _embed.src = _movie_res[0] + \".avi\";\n        _embed.autostart = true;\n        _embed.loop = true;\n        _embed.className = \"ieEmbed\";\n        var object = _notice.appendChild(_embed);\n    }\n\n    /**\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     *\n     * the function below is for float layer\n     *\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     */\n\n    /**\n     * @description display float layer by transmiting idDiv\\imgPath\\imgName as\n     *              parameter\n     *\n     * @param {idDiv}\n     *            the id of the float layer which to be create\n     * @param {imgPath}\n     *            the path of the image to be display\n     * @param {imgName}\n     *            the name of the image to be display\n     * @return {null} null\n     */\n    function showid(idDiv, imgPath, imgName) {\n        var isIE = (document.all) ? true : false;\n        var isIE6 = isIE\n                && ([ /MSIE (\\d)\\.0/i.exec(navigator.userAgent) ][0][1] == 6);\n        var newbox = document.getElementById(idDiv);\n        newbox.style.zIndex = \"9999\";\n        newbox.style.display = \"block\";\n        newbox.style.position = !isIE6 ? \"fixed\" : \"absolute\";\n        newbox.style.top = newbox.style.left = \"50%\";\n        newbox.style.marginTop = -newbox.offsetHeight / 2 + \"px\";\n        newbox.style.marginLeft = -newbox.offsetWidth / 2 + \"px\";\n\n        /*\n         * judge whether img tag which id named _img is exists or not, if not\n         * exists, create, else do nothing\n         */\n        if (null == document.getElementById(\"_img\")) {\n            var _img = document.createElement(\"img\");\n            _img.id = \"_img\";\n            _img.src = imgPath;\n            _img.className = \"imgStyle\";\n            newbox.appendChild(_img);\n\n            var _br = document.createElement(\"br\");\n            newbox.appendChild(_br);\n\n            var _b = document.createElement(\"b\");\n            _b.innerHTML = imgName;\n            newbox.appendChild(_b);\n        }\n\n        var layer = document.createElement(\"div\");\n        layer.id = \"layer\";\n        layer.style.width = layer.style.height = \"100%\";\n        layer.style.position = !isIE6 ? \"fixed\" : \"absolute\";\n        layer.style.top = layer.style.left = 0;\n        layer.style.backgroundColor = \"#000\";\n        layer.style.zIndex = \"9998\";\n        layer.style.opacity = \"0.6\";\n        document.body.appendChild(layer);\n        var sel = document.getElementsByTagName(\"select\");\n        for ( var i = 0; i < sel.length; i++) {\n            sel[i].style.visibility = \"hidden\";\n        }\n        function layer_iestyle() {\n            layer.style.width = Math.max(document.documentElement.scrollWidth,\n                    document.documentElement.clientWidth)\n                    + \"px\";\n            layer.style.height = Math.max(document.documentElement.scrollHeight,\n                    document.documentElement.clientHeight)\n                    + \"px\";\n        }\n        function newbox_iestyle() {\n            newbox.style.marginTop = document.documentElement.scrollTop\n                    - newbox.offsetHeight / 2 + \"px\";\n            newbox.style.marginLeft = document.documentElement.scrollLeft\n                    - newbox.offsetWidth / 2 + \"px\";\n        }\n        if (isIE) {\n            layer.style.filter = \"alpha(opacity=60)\";\n        }\n        if (isIE6) {\n            layer_iestyle();\n            newbox_iestyle();\n            window.attachEvent(\"onscroll\", function() {\n                newbox_iestyle();\n            });\n            window.attachEvent(\"onresize\", layer_iestyle);\n        }\n        layer.onclick = function() {\n            newbox.style.display = \"none\";\n            layer.style.display = \"none\";\n            for ( var i = 0; i < sel.length; i++) {\n                sel[i].style.visibility = \"visible\";\n            }\n        };\n    }\n\n    /**\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     *\n     * the function below is for window.onload\n     *\n     * ########## ########## ########## ########## ########## ########## ##########\n     * ########## ########## ########## ########## ########## ########## ##########\n     */\n    window.onload = function () {\n        if(config.ctrl) {\n            var _conDiv = document.getElementById(config.con_div);\n            if (_conDiv) {\n                var _ctrlSpan = document.createElement(\"span\");\n\n                _ctrlSpan.id = \"ctrlSpan\";\n                _ctrlSpan.className = \"ctrlSpan\";\n                if(config.display && _conDiv){\n                    _conDiv.style.display = \"\";\n                    _ctrlSpan.innerHTML = \"隐藏\";\n                } else {\n                    _conDiv.style.display = \"none\";\n                    _ctrlSpan.innerHTML = \"显示\";\n                }\n                var object = document.body.appendChild(_ctrlSpan);\n\n                _ctrlSpan.addEventListener(\"click\", function() {\n                    if(\"\" == _conDiv.style.display) {\n                        _conDiv.style.display = \"none\";\n                        _ctrlSpan.innerHTML = \"显示\";\n                    } else {\n                        _conDiv.style.display = \"\";\n                        _ctrlSpan.innerHTML = \"隐藏\";\n                    }\n                }, false);\n            }\n        }\n    }\n\n    v = {\n        version: version,\n        config: config,\n        init: init,\n        _bg: _bg,\n        _audio: _audio,\n        _movie: _movie,\n        slideSetBackground: slideSetBackground\n    }\n\n    e.PamJS = e.Pam = e.P = v;\n    // For JSONP\n    e.pamjs = pamjs;\n})(window)\n"],"sourceRoot":"/source/"}